"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2993],{92933:function(e,t,n){n.d(t,{Z:function(){return s}});var r,i=n(52746),o=n(96412),a=n(13089);!function(e){e.PAGE_LOAD="internal_promotion",e.PROMOTION_CLICK="internal_promotion_click",e.KMAIL_LOAD="kmail_signup_popup",e.KMAIL_CLICK="kmail_signup_success",e.KMAIL_UNSUBSCRIBE="kmail_unsubscribe"}(r||(r={}));var s=function(){function e(){(0,o.Z)(this,e),window.dataLayer=window.dataLayer||[]}return(0,a.Z)(e,[{key:"pushEvent",value:function(e){window.dataLayer.push(e)}},{key:"addHomePageLoadEvent",value:function(e,t){var n=this,o=[];Object.keys(e).forEach((function(r){var a=e[r];if(a.skipGTA!==t)if(Array.isArray(a.data)){var s=n.getPromotionsList(a);s&&o.push.apply(o,(0,i.Z)(s))}else{var u=n.getPromotionEventOption(a.data,1);u&&o.push(u)}}));var a={event:r.PAGE_LOAD,ecommerce:{promoView:{promotions:o}}};this.pushEvent(a)}},{key:"promotionsClickEvent",value:function(e,t,n){var i=[],o=this.getPromotionEventOption(t,n||e.position,e.name);o&&i.push(o);var a={event:r.PROMOTION_CLICK,ecommerce:{promoClick:{promotions:i}}};this.pushEvent(a)}},{key:"promotionsClickEvent1",value:function(e){var t=[];t.push(e);var n={event:r.PROMOTION_CLICK,ecommerce:{promoClick:{promotions:t}}};this.pushEvent(n)}},{key:"promotionsLoadEvent",value:function(e){var t={event:r.PAGE_LOAD,ecommerce:{promoView:{promotions:e}}};this.pushEvent(t)}},{key:"kmailModalLoadEvent",value:function(){var e={event:r.KMAIL_LOAD};this.pushEvent(e)}},{key:"kmailUnsubscribeButtonEvent",value:function(){var e={event:r.KMAIL_UNSUBSCRIBE};this.pushEvent(e)}},{key:"kmailModalClickEvent",value:function(e,t){var n={event:r.KMAIL_CLICK,hashed_email:e,postcode:t};this.pushEvent(n)}},{key:"getPromotionsList",value:function(e){var t=this;if(!e.data)return[];var n=[],r=e.gta.name||e.data[0].title||"";return e.data.filter((function(e){return e.url})).forEach((function(e,i){var o=t.getPromotionEventOption(e,i+1,r);o&&n.push(o)})),n}},{key:"getPromotionEventOption",value:function(e,t,n){if(e){var r=e.cta?e.cta:e.copy;return{id:r||"",name:n||r||"",creative:"Home Page",position:t}}}}]),e}()},52993:function(e,t,n){n.d(t,{Z:function(){return E}});var r=n(20204),i=n(61211),o=n(10615),a=n(76500),s=n(60364),u=n(41156),c=n(39097),l=n(2784),p=n(20406),m=n(95235),d=n(28526),f=n.n(d),h=n(29361),v=n(92933),g=n(9620),b=n(11313),y=n(5634),x=n(3411),k=x.default.div.withConfig({displayName:"SubscriptionModalstyled",componentId:"sc-7gv1wc-0"})(["width:33.5rem;padding-bottom:1.5rem;","{width:100%;}&&&& .popup-content{display:flex;flex-direction:column;justify-content:center;align-items:center;.header-icon{padding:0.938rem 0.5rem 0.875rem 0.5rem;}.popup-title{text-align:center;margin-top:0.5rem;color:",";","{margin-bottom:0.5rem;font-size:1.25rem;}}& .popup-description{text-align:center;margin-top:1rem;margin-bottom:1.5rem;color:",";","{margin-top:0.5rem;}}.popup-input-wrapper{width:20.375rem;.popup-input{margin-bottom:1.188rem;}","{width:17.438rem;}}.request-failure-message{margin:0.5rem 0;display:flex;align-items:center;","{margin-top:unset;}.failure-message-info{margin-right:0.6rem;}.failure-message-text{color:",";}}.popup-footer-description{text-align:center;margin:1rem 0 1.5rem 0;p{color:",";margin:unset;a{color:",";text-decoration:underline;}}}.popup-button{width:20.375rem;","{width:17.5rem;}}}.popup-content.subscribed{.header-icon{padding:0.5rem;}.popup-title{margin-top:1rem;}}&& p{hyphens:unset;}"],(function(e){return e.theme.breakpoints.down("md")}),(function(e){return e.theme.palette.primary.dark}),(function(e){return e.theme.breakpoints.down("md")}),(function(e){var t;return null===(t=e.theme.palette.greyscale)||void 0===t?void 0:t.grey400}),(function(e){return e.theme.breakpoints.down("md")}),(function(e){return e.theme.breakpoints.down("md")}),(function(e){return e.theme.breakpoints.down("sm")}),(function(e){return e.theme.palette.secondary.orange200}),(function(e){var t;return null===(t=e.theme.palette.greyscale)||void 0===t?void 0:t.grey400}),(function(e){return e.theme.palette.secondary.blue100}),(function(e){return e.theme.breakpoints.down("md")})),w=n(52322);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=function(e){var t=e.data,n=e.isOpen,u=e.onClose,c=(0,s.Z)(),m=(0,l.useState)(!1),d=m[0],x=m[1],j=(0,l.useState)(""),O=j[0],_=j[1],E=(0,l.useState)(),N=E[0],P=E[1],L=(0,l.useState)(!1),Z=L[0],I=L[1],S=(0,l.useState)({}),M=S[0],A=S[1];(0,l.useEffect)((function(){n&&(new v.Z).kmailModalLoadEvent()}),[n]);var B=function(){return!(""===O||!O.match(h.CU))||(A(C(C({},M),{},{email:h.$C.error_email})),!1)},K=function(){var e=(0,p.Z)(f().mark((function e(t,n,r){var i,o,a,s;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!M.postcode&&!M.email&&B()){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,i=O.trim().toLowerCase(),o=y.createHash("sha256").update(i).digest("hex"),e.next=7,fetch(t,{method:"POST",body:JSON.stringify({tealium_account:h.$C.account,tealium_profile:n,tealium_datasource:r,tealium_event:h.$C.event,customer_email:i,customer_email_hashed:o,postcode:N,consent_source:h.$C.source}),headers:{"Content-Type":"application/json"}});case 7:return a=e.sent,e.next=10,a.status;case 10:200===(s=e.sent)&&((new v.Z).kmailModalClickEvent(o,(null===N||void 0===N?void 0:N.toString())||""),x(!0)),I(200!==s),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),console.error("Error in subscribe",JSON.stringify(e.t0)),I(!0);case 19:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t,n,r){return e.apply(this,arguments)}}();return(0,w.jsx)(b.Z,{open:n,onClose:u,"aria-labelledby":"modal-title","aria-describedby":"modal-description","data-testid":"popup-modal",children:function(){if(!n)return null;var e=d?h.P0.response:h.P0.request,s=t.items.filter((function(t){return t.slug===e}))[0],l=s.title,p=s.description,m=s.footerDescription,f=s.cta,v=s.icon,b=s.profile,y=s.datasource,x=s.failureMessage;return(0,w.jsx)(k,{"data-testid":"popup-content",children:(0,w.jsxs)("div",{className:"popup-content ".concat(d&&"subscribed"),children:[(0,w.jsx)(o.Z,{name:null===v||void 0===v?void 0:v.name,desktopSize:"48px",mobileSize:"48px",className:"header-icon"}),(0,w.jsx)(a.Z.Title5,{className:"popup-title","data-testid":"popup-title",fontWeight:"bold",children:l}),(0,w.jsx)(a.Z.Body1,{className:"popup-description","data-testid":"popup-description",children:p}),!d&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:"popup-input-wrapper",children:[(0,w.jsx)(g.Z,{className:"popup-input",onChange:function(e){P(e.target.value.replace(/[^0-9]/g,""))},onKeyPress:function(){M.postcode&&A(C(C({},M),{},{postcode:null}))},onBlur:function(){var e=(null===N||void 0===N?void 0:N.toString().length)||0,t=e>0&&4!==e?h.$C.error_postcode:null;A(C(C({},M),{},{postcode:t}))},inputProps:{maxLength:4},value:N,label:h.$C.postcode,size:"small",variant:"outlined",testId:"input-postcode",helperText:M.postcode&&M.postcode,error:!!M.postcode}),(0,w.jsx)(g.Z,{className:"popup-input",onChange:function(e){return _(e.target.value)},onKeyPress:function(){M.email&&A(C(C({},M),{},{email:null}))},onBlur:B,value:O,label:h.$C.email,size:"small",required:!0,type:"email",variant:"outlined",testId:"input-email",helperText:M.email&&M.email,error:!!M.email})]}),Z&&(0,w.jsxs)("div",{className:"request-failure-message","data-testid":"request-failure-message",children:[(0,w.jsx)(o.Z,{name:"Info",color:c.palette.secondary.orange200,className:"failure-message-info"}),(0,w.jsx)(a.Z.Body2,{className:"failure-message-text",children:x})]}),m&&(0,w.jsx)(a.Z.Caption,{className:"popup-footer-description","data-testid":"popup-footer-description",children:(0,r.h)(m.json)})]}),(0,w.jsx)(i.ZP,{className:"popup-button",testId:"popup-button",variant:"contained",onClick:function(){d?u():K(f.url,b,y)},children:f.name})]})})}()})},_=x.default.div.withConfig({displayName:"SubscriptionBannerstyled",componentId:"sc-1wum818-0"})(["display:flex;margin-top:4rem;margin-bottom:3rem;","{flex-direction:column;margin-top:unset;margin-bottom:unset;}.subscription-container{flex:1;gap:5.25rem;justify-content:center;align-items:center;background-color:",";color:",";padding:2rem;display:flex;.subscription-title{margin-bottom:0.5rem;}.subscription-text{flex:1;}.subscription-description{margin-bottom:unset;p{margin:unset;}}.subscription-button{width:9.8rem;margin-right:2.563rem;border:1px solid ",";}","{flex-direction:column;gap:unset;align-items:start;.subscription-title{margin-bottom:0.25rem;}.subscription-description{margin-bottom:1.5rem;}.subscription-button{min-width:9.813rem;margin:unset;}}}.store-locator-container{width:18rem;display:flex;justify-content:center;align-items:center;background-image:url(",");.store-locator-button{padding-left:0.75rem;}.MuiButton-startIcon{margin-right:0.649rem;}","{width:25%;}","{width:100%;height:10.375rem;.store-locator-button{width:9.75rem;padding-left:0.813rem;padding-right:unset;}.MuiButton-startIcon{margin-right:0.75rem;}.MuiButton-label{justify-content:start;}}}&& p{hyphens:unset;}"],(function(e){return e.theme.breakpoints.down("sm")}),(function(e){return e.theme.palette.primary.main}),(function(e){var t;return null===(t=e.theme.palette.greyscale)||void 0===t?void 0:t.grey50}),(function(e){var t;return null===(t=e.theme.palette.greyscale)||void 0===t?void 0:t.grey50}),(function(e){return e.theme.breakpoints.down("sm")}),(function(e){var t;return null!==(t=e.imageUrl)&&void 0!==t?t:""}),(function(e){return e.theme.breakpoints.down("md")}),(function(e){return e.theme.breakpoints.down("sm")})),E=function(e){var t=e.data,n=(0,s.Z)(),p=(0,u.Z)(n.breakpoints.down("md")),m=(0,l.useState)(!1),d=m[0],f=m[1];if(!t)return null;var h=t.subscriptionBanner,v=t.popupModalCollection,g=h.title,b=h.description,y=h.image,x=h.buttonText,k=h.icon,j=function(){f(!d)};return(0,w.jsxs)(_,{className:p?"full-bleed":"",imageUrl:y.url||"","data-testid":"subscription-banner","data-index":null===t||void 0===t?void 0:t.sq,children:[(0,w.jsxs)("div",{className:"subscription-container",children:[(0,w.jsxs)("div",{className:"subscription-text",children:[(0,w.jsx)(a.Z.Subtitle,{fontWeight:"bold",className:"subscription-title","data-testid":"subscription-title",children:g}),(0,w.jsx)(a.Z.Subtitle,{className:"subscription-description","data-testid":"subscription-description",children:(0,r.h)(b.json)})]}),(0,w.jsx)(i.ZP,{variant:"contained",className:"subscription-button","data-testid":"subscription-button",onClick:function(){return j()},children:x})]}),(0,w.jsx)("div",{className:"store-locator-container",children:(0,w.jsx)(c.default,{href:k.url,passHref:!0,children:(0,w.jsx)(i.ZP,{startIcon:(0,w.jsx)(o.Z,{name:k.name,size:"small",color:n.palette.common.white}),variant:"contained",className:"store-locator-button","data-testid":"store-locator-button",children:k.title})})}),d&&(0,w.jsx)(O,{data:v,isOpen:d,onClose:j})]})}}}]);